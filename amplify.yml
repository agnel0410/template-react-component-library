version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm --version
        - echo "//npm.pkg.github.com/:_authToken=$NPM_AUTH_TOKEN" > ~/.npmrc
        - npm cache clear --force && npm install --no-shrinkwrap --update-binary
        - npm --version
        - npm ci
    build:
      commands:
        - npm run build-sb
  artifacts:
    baseDirectory: dist-storybook
    files:
      - "**/*"
  cache:
    paths:
      - node_modules/**/*